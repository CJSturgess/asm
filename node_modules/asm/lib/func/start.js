var asm = require('../asm');

//Start the server.
asm.startServer = function() {
    return new Promise(function(resolve, reject) {
        asm.server.start(function(err) {
            if (err) {
                console.log("[start] Error staring server.".red);
                reject('Error while starting server.');
            }
        });
        var checkRunning = setInterval(function() {
            if (asm.server.running) {
                console.log("[startServer] Server started successfully.".green);
                asm.game = asm.server.game;
                resolve(null);
                clearInterval(checkRunning);
            }
        }, 1000);
    });
};